<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="../js/EventUtil.js"></script>
</head>

<body>
    <form>
        <select id="selLocations" size="5">
            <option value="Sunnyvale, CA">Sunnyvale</option>
            <option value="Los Angeles, CA">Los Angeles</option>
            <option value="Mountain View, CA">Mountain View</option>
            <option value="">China</option>
            <option>Australia</option>
        </select>
        <br> Click the "Shift Up" or "Shift Down" button to move the item with this position:
        <br>
        <input type="text" id="txtIndex" value="0">
        <br>
        <input type="button" value="Shift Up" id="btnUp">
        <input type="button" value="Shift Down" id="btnDown">
        <input type="button" value="add Option" id="btnAdd">
    </form>
    <script type="text/javascript">
        (function () {
            EventUtil.addHandler(window, 'load', function (event) {
                var selectbox = document.getElementById('selLocations');
                selectbox.options[0].selected = true;
            })
            var btnUp = document.getElementById("btnUp");
            var btnDown = document.getElementById("btnDown");
            var btnAdd = document.getElementById("btnAdd");
            EventUtil.addHandler(btnAdd, 'click', function (event) {
                var selectbox = document.getElementById('selLocations');
                selectbox.removeChild(selectbox.options[0]);
                var newOption = document.createElement("option");
                newOption.appendChild(document.createTextNode("Japan"));
                newOption.setAttribute("value", "Japan");
                selectbox.appendChild(newOption);
            });

            EventUtil.addHandler(btnUp, "click", function (event) {
                var selectbox = document.getElementById("selLocations");
                console.log("Select Value:" + selectbox.options[selectbox.selectedIndex].value);
                var textbox = document.getElementById("txtIndex");
                var optionToMove = selectbox.options[parseInt(textbox.value, 10)];

                if (optionToMove.index > 0) {
                    selectbox.insertBefore(optionToMove, selectbox.options[optionToMove.index - 1]);
                }
            });

            EventUtil.addHandler(btnDown, "click", function (event) {
                var selectbox = document.getElementById("selLocations");
                var textbox = document.getElementById("txtIndex");
                var optionToMove = selectbox.options[parseInt(textbox.value, 10)];

                selectbox.insertBefore(optionToMove, selectbox.options[optionToMove.index + 2]);
            });
            function getSelectedOptions(selectbox) {
                var result = new Array();
                var option = null;
                for (var i = 0, len = selectbox.opetions.length; i < len; i++) {
                    option = select.options[i];
                    if (option.selected) {
                        result.push(option);
                    }
                }
                return result;
            }
        })();
    </script>
</body>

</html>